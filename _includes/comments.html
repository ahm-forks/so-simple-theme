{% if page.comments != false and jekyll.environment == "production" %}
  {% if site.gitalk.secret and site.gitalk.id and site.gitalk.name and site.gitalk.owner %}
    <div id="gitalk-container">
    <script>
      const gitalk = new Gitalk({
        clientID: '{{ site.gitalk.id }}',
        clientSecret: '{{ site.gitalk.secret }}',
        repo: '{{ site.gitalk.name }}',      // The repository of store comments,
        owner: '{{ site.gitalk.owner }}',
        admin: {{ site.gitalk.admins | jsonify}},
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: {{ site.gitalk.distractionFree | jsonify}}  // Facebook-like distraction free mode
      });
      gitalk.render('gitalk-container')
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://gitalk.github.io/" rel="nofollow">comments powered by Gitalk.</a></noscript>
  {% elsif site.disqus.shortname %}
    <div class="page-comments">
      <div id="disqus_thread"></div>
      <script>
        var disqus_config = function () {
          this.page.url = '{{ page.url | absolute_url }}';
          this.page.identifier = '{{ page.url | absolute_url }}';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://{{ site.disqus.shortname }}.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  {% endif %}
  </div>
{% endif %}
