{% if page.comments != false and jekyll.environment == "production" %}
  <div class="page-comments">
  {% if site.utterances.repo and site.utterances.term %}
    <div id="utterances-container">
      <script src="https://utteranc.es/client.js"
        repo="{{ site.utterances.repo }}"
        issue-term="{{ site.utterances.term }}"
        {% if site.utterances.lebel %}
          label="{{ site.utterances.label }}"
        {% else %}
          label="Post Comment"
        {% endif %}
        {% if site.utterances.theme %}
          theme="{{ site.utterances.theme }}"
        {% else %}
          theme="preferred-color-scheme"
        {% endif %}
        crossorigin="anonymous"
        async>
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://utteranc.es/" rel="nofollow">comments powered by Utterances.</a></noscript>
    </div>
  {% elsif site.gitalk.secret and site.gitalk.id and site.gitalk.name and site.gitalk.owner %}
    <div id="gitalk-container"></div>
    <script>
      const gitalk = new Gitalk({
        clientID: '{{ site.gitalk.id }}',
        clientSecret: '{{ site.gitalk.secret }}',
        repo: '{{ site.gitalk.name }}',      // The repository of store comments,
        owner: '{{ site.gitalk.owner }}',
        admin: {{ site.gitalk.admins | jsonify}},
        id: "{{ page.id }}",      // Ensure uniqueness and length less than 50
        distractionFreeMode: {{ site.gitalk.distractionFree | jsonify}}  // Facebook-like distraction free mode
      });
      gitalk.render('gitalk-container')
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://gitalk.github.io/" rel="nofollow">comments powered by Gitalk.</a></noscript>
  {% elsif site.disqus.shortname %}
      <div id="disqus_thread"></div>
      <script>
        var disqus_config = function () {
          this.page.url = '{{ page.url | absolute_url }}';
          this.page.identifier = '{{ page.url | absolute_url }}';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://{{ site.disqus.shortname }}.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  {% endif %}
  </div>
{% endif %}
